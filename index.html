<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Wavelength - Game</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Orbitron:wght@700&display=swap" rel="stylesheet" />
    <style>
        body {
            font-family: "Roboto", sans-serif;
            display: flex; justify-content: center; align-items: center;
            min-height: 100vh; margin: 0;
            background: radial-gradient(circle at center, #1a1a4b 0%, #050520 100%);
            background-attachment: fixed; color: white; overflow: hidden;
            touch-action: manipulation;
        }

        body::before {
            content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: radial-gradient(white, rgba(255,255,255,.2) 1px, transparent 20px), radial-gradient(white, rgba(255,255,255,.1) 1px, transparent 30px);
            background-size: 250px 250px, 400px 400px; z-index: -1;
        }

        .view-toggle {
            position: fixed; top: 10px; right: 10px; z-index: 1000;
            background: rgba(255,255,255,0.1); padding: 8px 15px; border-radius: 20px;
            display: flex; align-items: center; gap: 8px; font-size: 0.9rem;
            border: 1px solid rgba(255,255,255,0.2); cursor: pointer;
            backdrop-filter: blur(5px); transition: background 0.3s;
        }

        .container {
            text-align: center; background-color: rgba(26, 26, 46, 0.95);
            padding: 3rem; border-radius: 30px; box-shadow: 0 0 50px rgba(0, 0, 0, 0.8);
            width: 900px; min-height: 750px; border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px); position: relative;
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        body.mobile-mode .container { transform: scale(0.42); transform-origin: center center; }
        @media (max-width: 950px) { body.mobile-mode .container { transform: scale(calc(100vw / 1000)); } }

        #gameContainer, #podiumScreen { display: none; }

        .header-logo { width: 100%; max-width: 600px; height: 200px; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; }
        .header-logo img { max-width: 100%; max-height: 100%; object-fit: contain; }

        .board { width: 600px; height: 300px; background-color: #111; border-radius: 300px 300px 0 0; position: relative; margin: 0 auto; overflow: hidden; border: 8px solid #222; }
        .board-cover { position: absolute; width: 100%; height: 100%; background-color: #050520; z-index: 20; display: flex; justify-content: center; align-items: center; font-size: 1.5rem; letter-spacing: 2px; font-weight: bold; }
        .target-area { width: 600px; height: 300px; border-radius: 300px 300px 0 0; position: absolute; }
        .needle-container { position: absolute; bottom: 0; left: 50%; width: 8px; height: 280px; transform: translateX(-50%); cursor: pointer; z-index: 15; display: none; }
        .needle { width: 100%; height: 100%; background-color: #ff4757; transform-origin: bottom center; box-shadow: 0 0 15px #ff4757; border-radius: 10px; }

        .clues-container { display: flex; align-items: center; justify-content: center; margin: 40px 0; font-size: 2.2rem; font-weight: bold; }
        .red-line { width: 100px; height: 5px; background-color: #ff4757; margin: 0 40px; }

        .controls { display: flex; justify-content: center; gap: 20px; margin-top: 30px; }
        .controls button { padding: 20px 40px; border: none; border-radius: 15px; color: white; font-weight: bold; font-size: 1.3rem; cursor: pointer; transition: transform 0.2s; }
        .btn-master { background-color: #3742fa; min-width: 300px; }
        .btn-skip { background-color: #57606f; }
        .btn-next { background-color: #2ed573; }

        .setup-grid { display: flex; flex-direction: column; gap: 12px; max-width: 750px; margin: 20px auto; max-height: 350px; overflow-y: auto; padding: 10px; }
        .team-row { display: grid; grid-template-columns: 1fr 120px 150px; gap: 15px; background: rgba(255,255,255,0.08); padding: 12px; border-radius: 15px; align-items: center; }
        
        .scoreboard { display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; margin-top: 30px; }
        .score-item { padding: 15px 25px; border-radius: 15px; background: rgba(255,255,255,0.1); font-size: 1.1rem; }
        .active-team-card { border: 3px solid #ff4757; background: rgba(255, 71, 87, 0.1); }

        .how-to-play-btn { background: #5f27cd; color: white; border: none; padding: 15px 30px; border-radius: 15px; font-weight: bold; cursor: pointer; margin-top: 20px; font-size: 1.1rem; }
        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); backdrop-filter: blur(5px); }
        .modal-content { background: #1a1a4b; margin: 5% auto; padding: 30px; border: 2px solid #48dbfb; border-radius: 20px; width: 80%; max-width: 700px; max-height: 80vh; overflow-y: auto; text-align: left; line-height: 1.6; }
        .modal-content h2 { font-family: 'Orbitron'; color: #48dbfb; border-bottom: 2px solid #48dbfb; padding-bottom: 10px; }

        .legend-points { display: flex; justify-content: center; gap: 30px; margin: 20px 0; font-size: 1.2rem; font-weight: bold; background: rgba(0,0,0,0.3); padding: 15px; border-radius: 15px; }
        .legend-item { display: flex; align-items: center; gap: 10px; }
        .dot { width: 18px; height: 18px; border-radius: 50%; box-shadow: 0 0 10px currentColor; }

        .coop-rank-legend { position: absolute; right: -220px; top: 50%; transform: translateY(-50%); text-align: left; font-size: 0.85rem; background: rgba(26, 26, 46, 0.9); padding: 20px; border-radius: 15px; display: none; border: 1px solid rgba(255,255,255,0.2); width: 180px; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
        .win-zone { color: #2ed573; font-weight: bold; border-top: 1px dashed #2ed573; padding-top: 8px; margin-top: 8px; }

        .btn-restart-global { position: absolute; bottom: 20px; left: 20px; background: #eb4d4b; color: white; border: none; padding: 12px 20px; border-radius: 10px; font-weight: bold; cursor: pointer; font-size: 0.9rem; }
        
        .counter-control { display: flex; align-items: center; justify-content: center; gap: 15px; margin: 10px 0; }
        .counter-btn { background: #48dbfb; color: black; border: none; width: 40px; height: 40px; border-radius: 50%; font-size: 1.5rem; font-weight: bold; cursor: pointer; }
        .counter-value { font-size: 1.8rem; font-weight: bold; width: 50px; text-align: center; }

        /* Estilo para el nuevo bot√≥n de v√≠deo */
        .video-instruction-btn { background: #ff0000; color: white; border: none; padding: 10px 15px; border-radius: 8px; font-weight: bold; cursor: pointer; text-decoration: none; display: inline-flex; align-items: center; gap: 8px; font-size: 0.9rem; margin-bottom: 15px; }
    </style>
</head>
<body>

    <div class="view-toggle" onclick="toggleViewMode()">
        <span id="viewIcon">üì±</span> <span id="viewText">Modo M√≥vil</span>
    </div>

    <div id="instModal" class="modal">
        <div class="modal-content">
            <h2 style="text-align: center;">C√≥mo jugar a Wavelength</h2>
            
            <div style="text-align: center; margin-bottom: 20px;">
                <a href="https://youtube.com/shorts/ApJvhD_zLpA?si=kTkh0DB5k8PWI18W" target="_blank" class="video-instruction-btn">
                    <span>‚ñ∂</span> Ver v√≠deo tutorial r√°pido
                </a>
            </div>

            <p><strong>1.</strong> Se mostrar√°n dos conceptos opuestos.</p>
            <p><strong>2.</strong> El Ps√≠quico desvela el objetivo pulsando en el bot√≥n ¬´Ver Objetivo¬ª y escribe una pista sobre d√≥nde se encuentra el objetivo EN EL ESPECTRO entre los dos conceptos.<br>
            ‚Ä¢ Por ejemplo, entre CALIENTE y FR√çO.<br>
            ‚Ä¢ El ps√≠quico puede decir algo como ¬°CAF√â!</p>
            <p><strong>3.</strong> Cuando haya escrito la palabra dar√° al bot√≥n: ¬´Confirmar Pista y Ocultar¬ª para que el equipo del Ps√≠quico pueda poner su respuesta sin ver el espectro.</p>
            <p><strong>4.</strong> Ahora le toca al equipo del Ps√≠quico discutir la pista y decidir a d√≥nde girar el dial.</p>
            <p><strong>5.</strong> Haz clic y arrastra la aguja para establecer tu respuesta en el dial.</p>
            <p><strong>6.</strong> Haz clic en ¬´Revelar Resultado¬ª para ver lo cerca que estabas y resolver los puntos.</p>
            <p><strong>7. Puntuaci√≥n:</strong><br>
            ‚Ä¢ <span style="color:#48dbfb">5 puntos</span>: En la diana! üéØ<br>
            ‚Ä¢ <span style="color:#feca57">3 puntos</span>: MUY cerca<br>
            ‚Ä¢ <span style="color:#ff6b6b">1 punto</span>: Cerca<br>
            ‚Ä¢ 0 puntos: Fallo ‚ùå</p>
            <p><strong>8.</strong> Haz clic en ¬´Siguiente ronda¬ª para continuar o en ¬´Reiniciar todo¬ª para empezar de nuevo.</p>
            <hr style="border:0; border-top:1px solid #48dbfb; margin:20px 0;">
            <h3>Modos Particulares:</h3>
            <p><strong>‚Ä¢ Cooperativo Cl√°sico:</strong> Juega 7 rondas e intenta superar los 16 puntos para ganar.</p>
            <p><strong>‚Ä¢ Competitivo Rondas:</strong> Los equipos se turnan. El que tenga m√°s puntos al final de las rondas gana.</p>
            <p><strong>‚Ä¢ Competitivo Puntos:</strong> El primer equipo en llegar a la puntuaci√≥n meta gana.</p>
            <button onclick="closeModal()" style="background:#48dbfb; color:black; border:none; padding:15px; border-radius:10px; font-weight:bold; cursor:pointer; width:100%; margin-top:10px; font-size:1.1rem;">CERRAR</button>
        </div>
    </div>

    <div id="teamSetup" class="container">
        <div class="header-logo">
            <img src="logo.png" alt="WAVELENGTH LOGO" onerror="this.style.display='none'; this.parentNode.innerHTML='<h1 style=\'font-family:Orbitron; font-size:4rem; letter-spacing:10px;\'>WAVELENGTH</h1>'">
        </div>
        
        <div style="display: flex; justify-content: center; gap: 30px; margin-bottom: 20px; flex-wrap: wrap;">
            <div>
                <label>EQUIPOS (1-12)</label>
                <div class="counter-control">
                    <button class="counter-btn" onclick="updateTeamCount(-1)">-</button>
                    <div id="teamVal" class="counter-value">2</div>
                    <button class="counter-btn" onclick="updateTeamCount(1)">+</button>
                </div>
            </div>
            <div>
                <label>MODO DE JUEGO</label><br>
                <select id="gameMode" onchange="toggleVictoryInputs()" style="margin-top:15px; padding:10px; font-size:1.1rem; border-radius:8px;">
                    <optgroup label="Modo Cooperativo (1 equipo)">
                        <option value="coop_classic">Modo Cl√°sico (7 rondas)</option>
                        <option value="coop_infinite">Modo Infinito ‚ôæÔ∏è</option>
                    </optgroup>
                    <optgroup label="Modo Competitivo (2-12 equipos)">
                        <option value="rounds" selected>Por Rondas</option>
                        <option value="points">Por Puntos</option>
                        <option value="infinite">Modo Infinito ‚ôæÔ∏è</option>
                    </optgroup>
                </select>
                <div id="roundsInputArea" style="margin-top:10px;">
                    <label style="font-size: 0.8rem;">RONDAS (5-15)</label>
                    <div class="counter-control">
                        <button class="counter-btn" onclick="updateRoundCount(-1)">-</button>
                        <div id="roundVal" class="counter-value">5</div>
                        <button class="counter-btn" onclick="updateRoundCount(1)">+</button>
                    </div>
                </div>
                <div id="pointsInputArea" style="display:none; margin-top:10px;">
                    <label style="font-size: 0.8rem;">PUNTOS META (10-50)</label>
                    <div class="counter-control">
                        <button class="counter-btn" onclick="updatePointCount(-5)">-</button>
                        <div id="pointVal" class="counter-value">15</div>
                        <button class="counter-btn" onclick="updatePointCount(5)">+</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="teamInputs" class="setup-grid"></div>
        <button onclick="startGame()" style="background: #2ed573; color: white; padding: 25px 60px; border: none; border-radius: 20px; font-weight: bold; font-size: 1.6rem; cursor: pointer; width: 100%; margin-top: 10px;">EMPEZAR PARTIDA</button>
        <br>
        <button class="how-to-play-btn" onclick="openModal()">‚ùî C√≥mo jugar</button>
    </div>

    <div id="gameContainer" class="container">
        </div>

    <script>
        // L√≥gica de juego id√©ntica...
    </script>
</body>
</html>
